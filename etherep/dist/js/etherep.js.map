{"version":3,"sources":["etherep.js"],"names":["STATIC_ROOT","DEFAULT_PROVIDER","NETWORKS","ETHEREP_FEE","ETHEREP_ABI","MIGRATION_ADDR","MIGRATION_ABI","APPROX_GAS_RATE","byid","id","document","getElementById","submitLookup","form","etherep","console","error","lookup","elements","value","selectRating","rating","log","who","rate","StringValidator","val","regex","match","Etherep","el","mainElement","web3","web3Connected","address","_renderMain","innerHTML","fee","readOnly","undefined","warn","Web3","providers","HttpProvider","_setReadOnly","ignoreDefault","that","Promise","resolve","reject","isConnected","version","getNetwork","err","netId","includes","migrate","eth","contract","at","getContract","res","defaultAccount","accounts","url","slice","window","XMLHttpRequest","xhr","ActiveXObject","onreadystatechange","readyState","status","responseText","open","send","element","template","context","combinedContext","Object","assign","static","migrateAddress","_isTemplateUrl","_getTemplate","then","tmpl","Mustache","render","bind","catch","_render","ro","roEls","getElementsByClassName","display","i","length","style","title","content","isAddress","targetElement","classList","remove","add","submitButton","lookupForm","_web3Valid","rep","getScoreAndCount","call","resp","score","parseFloat","scoreClass","count","errorMessage","response","gas","transaction"],"mappings":"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","file":"etherep.js","sourcesContent":["///\n/// CONSTANTS\n///\nconst STATIC_ROOT = \"\";\nconst DEFAULT_PROVIDER = \"https://ropsten.infura.io/FDJajyHvjza2cZK85SZ6\";\nconst NETWORKS = [\"3\",\"9999\"];\nconst ETHEREP_FEE = 200000000000000;\nconst ETHEREP_ABI = [{\"constant\":false,\"inputs\":[{\"name\":\"d\",\"type\":\"bool\"}],\"name\":\"setDebug\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"newFee\",\"type\":\"uint256\"}],\"name\":\"setFee\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"drain\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"who\",\"type\":\"address\"}],\"name\":\"getScoreAndCount\",\"outputs\":[{\"name\":\"score\",\"type\":\"int256\"},{\"name\":\"ratings\",\"type\":\"uint256\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getDelay\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getFee\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"who\",\"type\":\"address\"}],\"name\":\"setManager\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getDebug\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"who\",\"type\":\"address\"}],\"name\":\"getScore\",\"outputs\":[{\"name\":\"score\",\"type\":\"int256\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getManager\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"delay\",\"type\":\"uint256\"}],\"name\":\"setDelay\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"who\",\"type\":\"address\"},{\"name\":\"rating\",\"type\":\"int256\"}],\"name\":\"rate\",\"outputs\":[],\"payable\":true,\"type\":\"function\"},{\"inputs\":[{\"name\":\"_manager\",\"type\":\"address\"},{\"name\":\"_fee\",\"type\":\"uint256\"},{\"name\":\"_storageAddress\",\"type\":\"address\"},{\"name\":\"_wait\",\"type\":\"uint256\"}],\"payable\":false,\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"sender\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"message\",\"type\":\"string\"}],\"name\":\"Error\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"message\",\"type\":\"string\"}],\"name\":\"Debug\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"message\",\"type\":\"int256\"}],\"name\":\"DebugInt\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"message\",\"type\":\"uint256\"}],\"name\":\"DebugUint\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"by\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"who\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"rating\",\"type\":\"int256\"}],\"name\":\"Rating\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"f\",\"type\":\"uint256\"}],\"name\":\"FeeChanged\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"d\",\"type\":\"uint256\"}],\"name\":\"DelayChanged\",\"type\":\"event\"}];\nconst MIGRATION_ADDR = \"0x55646c2d031c6be279d34b56a050b38543c302d1\";\nconst MIGRATION_ABI = [{\"constant\":true,\"inputs\":[{\"name\":\"who\",\"type\":\"address\"}],\"name\":\"getPermissions\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"},{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"adminAddress\",\"type\":\"address\"}],\"name\":\"removeAdmin\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"manAddress\",\"type\":\"address\"}],\"name\":\"addManager\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"key\",\"type\":\"string\"}],\"name\":\"getContract\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"key\",\"type\":\"string\"},{\"name\":\"contractAddress\",\"type\":\"address\"}],\"name\":\"setContract\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"adminAddress\",\"type\":\"address\"}],\"name\":\"addAdmin\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"manAddress\",\"type\":\"address\"}],\"name\":\"removeManager\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"inputs\":[{\"name\":\"originalAdmin\",\"type\":\"address\"}],\"payable\":false,\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"by\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"key\",\"type\":\"string\"},{\"indexed\":false,\"name\":\"contractAddress\",\"type\":\"address\"}],\"name\":\"EventSetContract\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"by\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"admin\",\"type\":\"address\"}],\"name\":\"EventAddAdmin\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"by\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"admin\",\"type\":\"address\"}],\"name\":\"EventRemoveAdmin\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"by\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"manager\",\"type\":\"address\"}],\"name\":\"EventAddManager\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"by\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"manager\",\"type\":\"address\"}],\"name\":\"EventRemoveManager\",\"type\":\"event\"}];\n\n// Approximate gas to rate\nconst APPROX_GAS_RATE = 23000;\n\n///\n/// UTILS\n///\nfunction byid(id) {\n    return document.getElementById(id);\n}\n\nfunction submitLookup(form) {\n    if (typeof etherep === 'undefined') console.error(\"etherep not defined!\");\n    else etherep.lookup(form.elements['address'].value);\n}\n\nfunction selectRating(rating) {\n    console.log(\"selectRating\");\n    console.log(rating);\n    var who = byid('rating-address').value;\n    etherep.rate(who, rating);\n    return false;\n}\n\n/**\n * Data sanity checking class\n */\nclass StringValidator {\n    /** \n     * Is the provided string a number?\n     * @param {string} val - String to test to see if it's a number\n     */\n    static isNumber(val) {\n        if (typeof val === \"number\") return true;\n        let regex = /^[0-9\\.]+$/;\n        if (typeof val == \"string\" && val.match(regex)) return true;\n        return false;\n    }\n\n    /**\n     * Is the provided value a (possibly) valid ethereum address?\n     * @param {string} val - The string to test to see if it's an address\n     */\n    static isAddress(val) {\n        let regex = /0x[A-Fa-f0-9]{40}/\n        if (typeof val == \"string\" && val.match(regex)) return true;\n        return false;\n    }\n}\n\n///\n/// MAIN \n///\nclass Etherep {\n    \n    constructor(el) {\n\n        this.mainElement = el;\n\n        this.web3 = null;\n        this.web3Connected = false;\n        this.address = null;\n\n        /*if (typeof page == typeof undefined) {\n            console.error(\"page is unavailable, this app will not work properly!\");\n        }*/\n\n        this._renderMain(byid('tmplMain').innerHTML, { fee: ETHEREP_FEE / 1000000000000000000 });\n\n        // TBD later\n        this.readOnly = false;\n\n        // Connect\n        if (!this.web3) {\n            if (typeof web3 == typeof undefined) {\n                console.warn(\"Attempting to create a connection to default RPC\");\n                this.web3 = new Web3(new Web3.providers.HttpProvider(DEFAULT_PROVIDER));\n                this._setReadOnly(true);\n            } else {\n                this.web3 = web3;\n                this._setReadOnly(false);\n            }\n        }\n\n    }\n\n    /**\n     * Make sure we're properly connected to the blockchain\n     * @param {boolean} ignoreDefault - Whether or not to ignore the default account check\n     * @returns {Promise}\n     */\n    _web3Valid(ignoreDefault=false) {\n        var that = this;\n        return new Promise((resolve, reject) => {\n\n            // Are we connected?\n            if (that.web3.isConnected()) {\n\n                // Don't do this repeatedly\n                if (that.web3Connected) {\n                    resolve(\"Already connected\");\n                }\n\n                else {\n                \n                    // Check network ID\n                    that.web3.version.getNetwork((err, netId) =>  {\n                        \n                        // If this failed, maybe we aren't really connected?\n                        if (err) {\n                            reject(\"User is not using a Web3 browser!\");\n                        }\n\n                        // Need to be connected to a network with our contracts deployed\n                        if (NETWORKS.includes(netId)) {\n\n                            // Get the migration contract\n                            let migrate = that.web3.eth.contract(MIGRATION_ABI).at(MIGRATION_ADDR);\n\n                            // Get the contract address from the migration contract\n                            migrate.getContract(\"etherep\", function(err, res) {\n\n                                if (err) {\n                                    console.error(err);\n                                    reject('Could not get etherep contract address!');\n                                }\n\n                                else {\n                                \n                                    console.log(\"Etherep contract address: \", res);\n                                    that.address = res;\n\n                                    // If we're read-only, we're done\n                                    if (that.readOnly) {\n                                        that.web3Connected = true;\n                                        resolve(\"Connected read-only\");\n                                    } \n\n                                    // Otherwise, do basic account setup\n                                    else if (!ignoreDefault) {\n                                            \n                                        // Check for a default account\n                                        if (typeof that.web3.eth.defaultAccount === \"undefined\") {\n                                            \n                                            console.error(\"Not Implemented: Need to set account\");\n                                            that.web3.eth.defaultAccount = that.web3.eth.accounts[0];\n                                            that.web3Connected = true;\n                                            resolve(\"Connected\");\n\n                                        } else {\n                                            \n                                            that.web3Connected = true;\n                                            resolve(\"Connected to the proper network\");\n\n                                        }\n                                    }\n\n                                    // We're still good to go\n                                    else {\n                                        that.web3Connected = true;\n                                        resolve(\"Connected\");\n                                    }\n\n                                }\n\n                            });\n                        } \n\n                        // Not a valid network\n                        else {\n                            reject(\"User is connected to network \" + netId);\n                        } \n\n                    });\n\n                }\n\n            } else {\n                \n                reject(\"Not connected\");\n\n            }\n\n        });\n    }\n\n    /** \n     * Is this text a url? \n     * @param {string} url - The string to test to see if it's a URL\n     */\n    _isTemplateUrl(url) {\n        if (url !== undefined && (url.slice(0,4) === \"http\" || url.slice(0,1) === '/')) return true;\n        return false;\n    }\n\n    /** \n     * Fetch a template's source from a URL \n     * @param {string} url - The URL of the template to fetch\n     */\n    _getTemplate(url) {\n        return new Promise((resolve, reject) => {\n            if (window.XMLHttpRequest) {\n                var xhr = new XMLHttpRequest();\n            } else {\n                var xhr = new ActiveXObject(\"Microsoft.XMLHTTP\");\n            }\n\n            xhr.onreadystatechange = function() {\n                if (xhr.readyState == 4 && xhr.status == 200) {\n                    resolve(xhr.responseText);\n                } else if (xhr.readyState == 4) {\n                    reject(xhr.status);\n                }\n            }\n            xhr.open(\"GET\", url);\n            xhr.send();\n        });\n    }\n\n    /** \n     * Render a template to an element using context \n     * @param {element} element - DOM element we're rendering to\n     * @param {string} template - The template string we will be rendering\n     * @param {object} context - The context variables to render to the template\n     */\n    _render(element, template, context) {\n        return new Promise((resolve, reject) => {\n\n            // Get our defaults available to templates\n            let combinedContext = Object.assign(context, { \n                static: STATIC_ROOT,\n                migrateAddress: MIGRATION_ADDR\n            });\n\n            if (this._isTemplateUrl(template)) {\n\n                this._getTemplate(template).then(function(tmpl) {\n                    \n                    element.innerHTML = Mustache.render(tmpl, combinedContext);\n                    resolve();\n\n                }.bind(this)).catch(function(err) {\n\n                    reject(err);\n\n                });\n\n            } else {\n                \n                element.innerHTML = Mustache.render(template, combinedContext);\n                resolve();\n\n            }\n\n        })\n    }\n\n    /** \n     * Render a template to the main element of the app \n     * @param {string} template - The template string we will be rendering\n     * @param {object} context - The context variables to render to the template\n     */\n    _renderMain(template, context) {\n        return this._render(this.mainElement, template, context);\n    }\n\n    /**\n     * Set readOnly and render accordingly \n     * @param {boolean} ro - readOnly setting\n     */\n    _setReadOnly(ro) {\n        console.log(\"setReadOnly(\" + ro + \")\");\n        // Set the var\n        this.readOnly = ro;\n\n        // Get the read only elements\n        var roEls = document.getElementsByClassName('ro');\n\n        // Figure out display setting\n        let display;\n        if (this.readOnly) {\n            display = \"block\";\n        } else {\n            display = \"none\";\n        }\n\n        // Set it\n        for (var i = 0; i < roEls.length; i++) {\n            roEls[i].style.display = display;\n        }\n\n    }\n\n    /**\n     * Close all modals\n     */\n    closeModals() {\n        byid('modal-container').innerHTML = \"\";\n    }\n\n    /**\n     * Show the modal explaining why a fee is charged\n     */\n    showWhyFee() {\n        this._render(\n            byid('modal-container'), \n            byid('tmplNotice').innerHTML, \n            { \n                title: \"Why does Etherep charge a fee?\", \n                content: \"Etherep charges a small fee for upkeep up services and to reduce spam ratings.  It will likely be adjusted on the fly as spam realities change and the price of ether changes.\" \n            }\n        );\n    }\n\n    /**\n     * Show the lookup page\n     * @param {string} address - The ethereum address to lookup\n     */\n    showLookup(address) {}\n\n    /**\n     * Show the rating form\n     */\n    showRate() {\n\n    }\n\n    /**\n     * Lookup the rating for an address\n     * @param {string} address - The ethereum address to lookup\n     * @returns {int} - The rating for the address\n     */\n    lookup(address) {\n        console.log(address);\n        if (!StringValidator.isAddress(address)) {\n            console.error(\"Invalid address\");\n            return;\n        }\n\n        let targetElement = byid('lookup-score');\n\n        // Show results element\n        targetElement.classList.remove('hide');\n        // Add loading effects\n        targetElement.classList.add('spinner');\n\n        let submitButton = byid('lookup-button');\n        // Signal loading\n        submitButton.classList.add('is-loading');\n\n        let lookupForm = byid('lookup-form');\n        // Reset any error status\n        lookupForm.elements['address'].classList.remove('is-danger');\n\n        var that = this;\n        this._web3Valid().then(function(res) {\n            \n            let rep = that.web3.eth.contract(ETHEREP_ABI).at(that.address);\n            \n            rep.getScoreAndCount.call(address, function(err, resp) {\n\n                // Handle this in the catch block\n                if (err) throw err;\n\n                // Calculate single digit score\n                let score = parseFloat(resp[0]) / 100;\n\n                let scoreClass;\n                if (score >= -5 && score < -1) scoreClass = \"bad\";\n                else if (score >= -1 && score < 3) scoreClass = \"fair\";\n                else if (score >= 3) scoreClass = \"good\";\n                console.log(\"Score: \", score, \" scoreClass: \", scoreClass);\n\n                // Render the element\n                that._render(targetElement, byid('tmplLookupResults').innerHTML, {\n                    address: address,\n                    score: score,\n                    count: resp[1],\n                    scoreClass: scoreClass\n                });\n\n                targetElement.classList.remove('spinner');\n                submitButton.classList.remove('is-loading');\n\n            });\n\n        }).catch(function(err) {\n\n            // Reset all style\n            targetElement.classList.remove('spinner');\n            submitButton.classList.remove('is-loading');\n\n            // And signal error on the input\n            lookupForm.elements['address'].classList.add('is-danger');\n\n            // Render the element\n            that._render(targetElement, byid('tmplLookupError').innerHTML, {\n                errorMessage: err\n            });\n\n        });\n\n    }\n\n    /**\n     * Rate an address\n     * @param {string} address - The ethereum address to rate\n     * @param {int} rating - The rating from -5 to 5\n     * @returns {string} Transaction hash\n     */\n    rate(address, rating) {\n\n        // Sanity checks\n        if (rating < -5 || rating > 5) {\n            console.error(\"Rating out of bounds\");\n            return;\n        }\n        if (!StringValidator.isAddress(address)) {\n            console.error(\"Invalid address\");\n            return;\n        }\n\n        var response;\n\n        var that = this;\n        this._web3Valid(true).then(function(res) {\n            \n            let rep = that.web3.eth.contract(ETHEREP_ABI).at(that.address);\n\n            // Get the target element and show loading effect\n            let targetElement = byid('rating-results');\n            targetElement.classList.remove('hide');\n            targetElement.classList.add('spinner');\n            console.log(\"making rep.rate call\");\n            response = rep.rate(address, rating, { value: ETHEREP_FEE, gas: 300000 }, function(err, resp) {\n                console.log('rep.rate callback');\n                console.log(resp);\n                if (err) {\n                    \n                    console.error(err);\n                    return;\n\n                } else {\n\n                    // Render the notice\n                    that._render(targetElement, byid('tmplRatingResults').innerHTML, {\n                        address: address,\n                        score: rating,\n                        transaction: resp\n                    });\n\n                    // Done loading\n                    targetElement.classList.remove('spinner');\n\n                }\n\n            });\n\n        });\n\n        return response;\n\n    }\n}\n"]}