{"version":3,"sources":["etherep.js"],"names":["STATIC_ROOT","DEFAULT_PROVIDER","NETWORKS","ETHEREP_FEE","ETHEREP_ABI","MIGRATION_ADDR","MIGRATION_ABI","APPROX_GAS_RATE","byid","id","document","getElementById","submitLookup","form","etherep","console","error","lookup","elements","value","selectRating","thisButt","rating","log","butts","getElementsByClassName","classList","contains","i","length","parentElement","add","remove","submitRating","who","rate","toggleRatingList","StringValidator","val","regex","match","Etherep","el","mainElement","web3","web3Connected","address","network","_renderMain","innerHTML","fee","readOnly","undefined","warn","Web3","providers","HttpProvider","_setReadOnly","ignoreDefault","that","Promise","resolve","reject","isConnected","version","getNetwork","err","netId","includes","migrate","eth","contract","at","getContract","res","defaultAccount","accounts","url","slice","window","XMLHttpRequest","xhr","ActiveXObject","onreadystatechange","readyState","status","responseText","open","send","element","template","context","combinedContext","Object","assign","static","migrateAddress","_isTemplateUrl","_getTemplate","then","tmpl","Mustache","render","bind","catch","_render","ro","roEls","display","style","title","content","isAddress","targetElement","submitButton","lookupForm","_web3Valid","rep","getScoreAndCount","call","resp","score","parseFloat","scoreClass","identOptions","background","margin","size","format","identData","Identicon","toString","scoreInt","Math","round","count","identicon","errorMessage","response","gas","etherscanLink","transaction"],"mappings":";;;;;;;;AAAA;AACA;AACA;AACA,IAAMA,cAAc,EAApB;AACA,IAAMC,mBAAmB,gDAAzB;AACA,IAAMC,WAAW,CAAC,GAAD,CAAjB;AACA,IAAMC,cAAc,eAApB;AACA,IAAMC,cAAc,CAAC,EAAC,YAAW,KAAZ,EAAkB,UAAS,CAAC,EAAC,QAAO,GAAR,EAAY,QAAO,MAAnB,EAAD,CAA3B,EAAwD,QAAO,UAA/D,EAA0E,WAAU,EAApF,EAAuF,WAAU,KAAjG,EAAuG,QAAO,UAA9G,EAAD,EAA2H,EAAC,YAAW,KAAZ,EAAkB,UAAS,CAAC,EAAC,QAAO,QAAR,EAAiB,QAAO,SAAxB,EAAD,CAA3B,EAAgE,QAAO,QAAvE,EAAgF,WAAU,EAA1F,EAA6F,WAAU,KAAvG,EAA6G,QAAO,UAApH,EAA3H,EAA2P,EAAC,YAAW,KAAZ,EAAkB,UAAS,EAA3B,EAA8B,QAAO,OAArC,EAA6C,WAAU,EAAvD,EAA0D,WAAU,KAApE,EAA0E,QAAO,UAAjF,EAA3P,EAAwV,EAAC,YAAW,IAAZ,EAAiB,UAAS,CAAC,EAAC,QAAO,KAAR,EAAc,QAAO,SAArB,EAAD,CAA1B,EAA4D,QAAO,kBAAnE,EAAsF,WAAU,CAAC,EAAC,QAAO,OAAR,EAAgB,QAAO,QAAvB,EAAD,EAAkC,EAAC,QAAO,SAAR,EAAkB,QAAO,SAAzB,EAAlC,CAAhG,EAAuK,WAAU,KAAjL,EAAuL,QAAO,UAA9L,EAAxV,EAAkiB,EAAC,YAAW,IAAZ,EAAiB,UAAS,EAA1B,EAA6B,QAAO,UAApC,EAA+C,WAAU,CAAC,EAAC,QAAO,EAAR,EAAW,QAAO,SAAlB,EAAD,CAAzD,EAAwF,WAAU,KAAlG,EAAwG,QAAO,UAA/G,EAAliB,EAA6pB,EAAC,YAAW,IAAZ,EAAiB,UAAS,EAA1B,EAA6B,QAAO,QAApC,EAA6C,WAAU,CAAC,EAAC,QAAO,EAAR,EAAW,QAAO,SAAlB,EAAD,CAAvD,EAAsF,WAAU,KAAhG,EAAsG,QAAO,UAA7G,EAA7pB,EAAsxB,EAAC,YAAW,KAAZ,EAAkB,UAAS,CAAC,EAAC,QAAO,KAAR,EAAc,QAAO,SAArB,EAAD,CAA3B,EAA6D,QAAO,YAApE,EAAiF,WAAU,EAA3F,EAA8F,WAAU,KAAxG,EAA8G,QAAO,UAArH,EAAtxB,EAAu5B,EAAC,YAAW,IAAZ,EAAiB,UAAS,EAA1B,EAA6B,QAAO,UAApC,EAA+C,WAAU,CAAC,EAAC,QAAO,EAAR,EAAW,QAAO,MAAlB,EAAD,CAAzD,EAAqF,WAAU,KAA/F,EAAqG,QAAO,UAA5G,EAAv5B,EAA+gC,EAAC,YAAW,IAAZ,EAAiB,UAAS,CAAC,EAAC,QAAO,KAAR,EAAc,QAAO,SAArB,EAAD,CAA1B,EAA4D,QAAO,UAAnE,EAA8E,WAAU,CAAC,EAAC,QAAO,OAAR,EAAgB,QAAO,QAAvB,EAAD,CAAxF,EAA2H,WAAU,KAArI,EAA2I,QAAO,UAAlJ,EAA/gC,EAA6qC,EAAC,YAAW,IAAZ,EAAiB,UAAS,EAA1B,EAA6B,QAAO,YAApC,EAAiD,WAAU,CAAC,EAAC,QAAO,EAAR,EAAW,QAAO,SAAlB,EAAD,CAA3D,EAA0F,WAAU,KAApG,EAA0G,QAAO,UAAjH,EAA7qC,EAA0yC,EAAC,YAAW,KAAZ,EAAkB,UAAS,CAAC,EAAC,QAAO,QAAR,EAAiB,QAAO,SAAxB,EAAD,CAA3B,EAAgE,QAAO,UAAvE,EAAkF,WAAU,EAA5F,EAA+F,WAAU,KAAzG,EAA+G,QAAO,UAAtH,EAA1yC,EAA46C,EAAC,YAAW,KAAZ,EAAkB,UAAS,CAAC,EAAC,QAAO,KAAR,EAAc,QAAO,SAArB,EAAD,EAAiC,EAAC,QAAO,QAAR,EAAiB,QAAO,QAAxB,EAAjC,CAA3B,EAA+F,QAAO,MAAtG,EAA6G,WAAU,EAAvH,EAA0H,WAAU,IAApI,EAAyI,QAAO,UAAhJ,EAA56C,EAAwkD,EAAC,UAAS,CAAC,EAAC,QAAO,UAAR,EAAmB,QAAO,SAA1B,EAAD,EAAsC,EAAC,QAAO,MAAR,EAAe,QAAO,SAAtB,EAAtC,EAAuE,EAAC,QAAO,iBAAR,EAA0B,QAAO,SAAjC,EAAvE,EAAmH,EAAC,QAAO,OAAR,EAAgB,QAAO,SAAvB,EAAnH,CAAV,EAAgK,WAAU,KAA1K,EAAgL,QAAO,aAAvL,EAAxkD,EAA8wD,EAAC,aAAY,KAAb,EAAmB,UAAS,CAAC,EAAC,WAAU,KAAX,EAAiB,QAAO,QAAxB,EAAiC,QAAO,SAAxC,EAAD,EAAoD,EAAC,WAAU,KAAX,EAAiB,QAAO,SAAxB,EAAkC,QAAO,QAAzC,EAApD,CAA5B,EAAoI,QAAO,OAA3I,EAAmJ,QAAO,OAA1J,EAA9wD,EAAi7D,EAAC,aAAY,KAAb,EAAmB,UAAS,CAAC,EAAC,WAAU,KAAX,EAAiB,QAAO,SAAxB,EAAkC,QAAO,QAAzC,EAAD,CAA5B,EAAiF,QAAO,OAAxF,EAAgG,QAAO,OAAvG,EAAj7D,EAAiiE,EAAC,aAAY,KAAb,EAAmB,UAAS,CAAC,EAAC,WAAU,KAAX,EAAiB,QAAO,SAAxB,EAAkC,QAAO,QAAzC,EAAD,CAA5B,EAAiF,QAAO,UAAxF,EAAmG,QAAO,OAA1G,EAAjiE,EAAopE,EAAC,aAAY,KAAb,EAAmB,UAAS,CAAC,EAAC,WAAU,KAAX,EAAiB,QAAO,SAAxB,EAAkC,QAAO,SAAzC,EAAD,CAA5B,EAAkF,QAAO,WAAzF,EAAqG,QAAO,OAA5G,EAAppE,EAAywE,EAAC,aAAY,KAAb,EAAmB,UAAS,CAAC,EAAC,WAAU,KAAX,EAAiB,QAAO,IAAxB,EAA6B,QAAO,SAApC,EAAD,EAAgD,EAAC,WAAU,KAAX,EAAiB,QAAO,KAAxB,EAA8B,QAAO,SAArC,EAAhD,EAAgG,EAAC,WAAU,KAAX,EAAiB,QAAO,QAAxB,EAAiC,QAAO,QAAxC,EAAhG,CAA5B,EAA+K,QAAO,QAAtL,EAA+L,QAAO,OAAtM,EAAzwE,EAAw9E,EAAC,aAAY,KAAb,EAAmB,UAAS,CAAC,EAAC,WAAU,KAAX,EAAiB,QAAO,GAAxB,EAA4B,QAAO,SAAnC,EAAD,CAA5B,EAA4E,QAAO,YAAnF,EAAgG,QAAO,OAAvG,EAAx9E,EAAwkF,EAAC,aAAY,KAAb,EAAmB,UAAS,CAAC,EAAC,WAAU,KAAX,EAAiB,QAAO,GAAxB,EAA4B,QAAO,SAAnC,EAAD,CAA5B,EAA4E,QAAO,cAAnF,EAAkG,QAAO,OAAzG,EAAxkF,CAApB;AACA,IAAMC,iBAAiB,4CAAvB;AACA,IAAMC,gBAAgB,CAAC,EAAC,YAAW,IAAZ,EAAiB,UAAS,CAAC,EAAC,QAAO,KAAR,EAAc,QAAO,SAArB,EAAD,CAA1B,EAA4D,QAAO,gBAAnE,EAAoF,WAAU,CAAC,EAAC,QAAO,EAAR,EAAW,QAAO,MAAlB,EAAD,EAA2B,EAAC,QAAO,EAAR,EAAW,QAAO,MAAlB,EAA3B,CAA9F,EAAoJ,WAAU,KAA9J,EAAoK,QAAO,UAA3K,EAAD,EAAwL,EAAC,YAAW,KAAZ,EAAkB,UAAS,CAAC,EAAC,QAAO,cAAR,EAAuB,QAAO,SAA9B,EAAD,CAA3B,EAAsE,QAAO,aAA7E,EAA2F,WAAU,EAArG,EAAwG,WAAU,KAAlH,EAAwH,QAAO,UAA/H,EAAxL,EAAmU,EAAC,YAAW,KAAZ,EAAkB,UAAS,CAAC,EAAC,QAAO,YAAR,EAAqB,QAAO,SAA5B,EAAD,CAA3B,EAAoE,QAAO,YAA3E,EAAwF,WAAU,EAAlG,EAAqG,WAAU,KAA/G,EAAqH,QAAO,UAA5H,EAAnU,EAA2c,EAAC,YAAW,IAAZ,EAAiB,UAAS,CAAC,EAAC,QAAO,KAAR,EAAc,QAAO,QAArB,EAAD,CAA1B,EAA2D,QAAO,aAAlE,EAAgF,WAAU,CAAC,EAAC,QAAO,EAAR,EAAW,QAAO,SAAlB,EAAD,CAA1F,EAAyH,WAAU,KAAnI,EAAyI,QAAO,UAAhJ,EAA3c,EAAumB,EAAC,YAAW,KAAZ,EAAkB,UAAS,CAAC,EAAC,QAAO,KAAR,EAAc,QAAO,QAArB,EAAD,EAAgC,EAAC,QAAO,iBAAR,EAA0B,QAAO,SAAjC,EAAhC,CAA3B,EAAwG,QAAO,aAA/G,EAA6H,WAAU,EAAvI,EAA0I,WAAU,KAApJ,EAA0J,QAAO,UAAjK,EAAvmB,EAAoxB,EAAC,YAAW,KAAZ,EAAkB,UAAS,CAAC,EAAC,QAAO,cAAR,EAAuB,QAAO,SAA9B,EAAD,CAA3B,EAAsE,QAAO,UAA7E,EAAwF,WAAU,EAAlG,EAAqG,WAAU,KAA/G,EAAqH,QAAO,UAA5H,EAApxB,EAA45B,EAAC,YAAW,KAAZ,EAAkB,UAAS,CAAC,EAAC,QAAO,YAAR,EAAqB,QAAO,SAA5B,EAAD,CAA3B,EAAoE,QAAO,eAA3E,EAA2F,WAAU,EAArG,EAAwG,WAAU,KAAlH,EAAwH,QAAO,UAA/H,EAA55B,EAAuiC,EAAC,UAAS,CAAC,EAAC,QAAO,eAAR,EAAwB,QAAO,SAA/B,EAAD,CAAV,EAAsD,WAAU,KAAhE,EAAsE,QAAO,aAA7E,EAAviC,EAAmoC,EAAC,aAAY,KAAb,EAAmB,UAAS,CAAC,EAAC,WAAU,KAAX,EAAiB,QAAO,IAAxB,EAA6B,QAAO,SAApC,EAAD,EAAgD,EAAC,WAAU,KAAX,EAAiB,QAAO,KAAxB,EAA8B,QAAO,QAArC,EAAhD,EAA+F,EAAC,WAAU,KAAX,EAAiB,QAAO,iBAAxB,EAA0C,QAAO,SAAjD,EAA/F,CAA5B,EAAwL,QAAO,kBAA/L,EAAkN,QAAO,OAAzN,EAAnoC,EAAq2C,EAAC,aAAY,KAAb,EAAmB,UAAS,CAAC,EAAC,WAAU,KAAX,EAAiB,QAAO,IAAxB,EAA6B,QAAO,SAApC,EAAD,EAAgD,EAAC,WAAU,KAAX,EAAiB,QAAO,OAAxB,EAAgC,QAAO,SAAvC,EAAhD,CAA5B,EAA+H,QAAO,eAAtI,EAAsJ,QAAO,OAA7J,EAAr2C,EAA2gD,EAAC,aAAY,KAAb,EAAmB,UAAS,CAAC,EAAC,WAAU,KAAX,EAAiB,QAAO,IAAxB,EAA6B,QAAO,SAApC,EAAD,EAAgD,EAAC,WAAU,KAAX,EAAiB,QAAO,OAAxB,EAAgC,QAAO,SAAvC,EAAhD,CAA5B,EAA+H,QAAO,kBAAtI,EAAyJ,QAAO,OAAhK,EAA3gD,EAAorD,EAAC,aAAY,KAAb,EAAmB,UAAS,CAAC,EAAC,WAAU,KAAX,EAAiB,QAAO,IAAxB,EAA6B,QAAO,SAApC,EAAD,EAAgD,EAAC,WAAU,KAAX,EAAiB,QAAO,SAAxB,EAAkC,QAAO,SAAzC,EAAhD,CAA5B,EAAiI,QAAO,iBAAxI,EAA0J,QAAO,OAAjK,EAAprD,EAA81D,EAAC,aAAY,KAAb,EAAmB,UAAS,CAAC,EAAC,WAAU,KAAX,EAAiB,QAAO,IAAxB,EAA6B,QAAO,SAApC,EAAD,EAAgD,EAAC,WAAU,KAAX,EAAiB,QAAO,SAAxB,EAAkC,QAAO,SAAzC,EAAhD,CAA5B,EAAiI,QAAO,oBAAxI,EAA6J,QAAO,OAApK,EAA91D,CAAtB;;AAEA;AACA,IAAMC,kBAAkB,KAAxB;;AAEA;AACA;AACA;AACA,SAASC,IAAT,CAAcC,EAAd,EAAkB;AACd,WAAOC,SAASC,cAAT,CAAwBF,EAAxB,CAAP;AACH;;AAED,SAASG,YAAT,CAAsBC,IAAtB,EAA4B;AACxB,QAAI,OAAOC,OAAP,KAAmB,WAAvB,EAAoCC,QAAQC,KAAR,CAAc,sBAAd,EAApC,KACKF,QAAQG,MAAR,CAAeJ,KAAKK,QAAL,CAAc,SAAd,EAAyBC,KAAxC;AACR;;AAED,SAASC,YAAT,CAAsBC,QAAtB,EAAgCC,MAAhC,EAAwC;AACpCP,YAAQQ,GAAR,CAAY,cAAZ;;AAEA,QAAIC,QAAQd,SAASe,sBAAT,CAAgC,eAAhC,CAAZ;;AAEA,QAAIjB,KAAK,aAAL,EAAoBkB,SAApB,CAA8BC,QAA9B,CAAuC,WAAvC,CAAJ,EAAyD;;AAErD;AACA,aAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIJ,MAAMK,MAA1B,EAAkCD,GAAlC,EAAuC;;AAEnCJ,kBAAMI,CAAN,EAASE,aAAT,CAAuBJ,SAAvB,CAAiCK,GAAjC,CAAqC,MAArC;AAEH;;AAED;AACAvB,aAAK,aAAL,EAAoBkB,SAApB,CAA8BM,MAA9B,CAAqC,WAArC;AAEH,KAZD,MAYO;;AAEH;AACA,aAAK,IAAIJ,KAAI,CAAb,EAAgBA,KAAIJ,MAAMK,MAA1B,EAAkCD,IAAlC,EAAuC;;AAEnC;AACA,gBAAIJ,MAAMI,EAAN,MAAaP,QAAjB,EAA2B;AACvBG,sBAAMI,EAAN,EAASE,aAAT,CAAuBJ,SAAvB,CAAiCM,MAAjC,CAAwC,MAAxC;AACH;AAEJ;;AAED;AACAxB,aAAK,aAAL,EAAoBkB,SAApB,CAA8BK,GAA9B,CAAkC,WAAlC;AAEH;;AAEDvB,SAAK,cAAL,EAAqBW,KAArB,GAA6BG,MAA7B;;AAEA,WAAO,KAAP;AACH;;AAED,SAASW,YAAT,GAAwB;AACpB,QAAIC,MAAM1B,KAAK,gBAAL,EAAuBW,KAAjC;AACA,QAAIG,SAASd,KAAK,cAAL,EAAqBW,KAAlC;AACAL,YAAQqB,IAAR,CAAaD,GAAb,EAAkBZ,MAAlB;AACH;;AAED,SAASc,gBAAT,GAA4B;AACxB;;;;;;AAMA,QAAIZ,QAAQd,SAASe,sBAAT,CAAgC,eAAhC,CAAZ;;AAEA,QAAIjB,KAAK,aAAL,EAAoBkB,SAApB,CAA8BC,QAA9B,CAAuC,WAAvC,CAAJ,EAAyD;;AAErD,aAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIJ,MAAMK,MAA1B,EAAkCD,GAAlC,EAAuC;AACnCJ,kBAAMI,CAAN,EAASF,SAAT,CAAmBM,MAAnB,CAA0B,WAA1B;AACH;AAEJ;;AAGD,SAAK,IAAIJ,MAAI,CAAb,EAAgBA,MAAIJ,MAAMK,MAA1B,EAAkCD,KAAlC,EAAuC;AACnCJ,cAAMI,GAAN,EAASF,SAAT,CAAmBM,MAAnB,CAA0B,WAA1B;AACH;AACJ;;AAED;;;;IAGMK;;;;;;;;AACF;;;;iCAIgBC,KAAK;AACjB,gBAAI,OAAOA,GAAP,KAAe,QAAnB,EAA6B,OAAO,IAAP;AAC7B,gBAAIC,QAAQ,YAAZ;AACA,gBAAI,OAAOD,GAAP,IAAc,QAAd,IAA0BA,IAAIE,KAAJ,CAAUD,KAAV,CAA9B,EAAgD,OAAO,IAAP;AAChD,mBAAO,KAAP;AACH;;AAED;;;;;;;kCAIiBD,KAAK;AAClB,gBAAIC,QAAQ,mBAAZ;AACA,gBAAI,OAAOD,GAAP,IAAc,QAAd,IAA0BA,IAAIE,KAAJ,CAAUD,KAAV,CAA9B,EAAgD,OAAO,IAAP;AAChD,mBAAO,KAAP;AACH;;;;;;AAGL;AACA;AACA;;;IACME;AAEF,qBAAYC,EAAZ,EAAgB;AAAA;;AAEZ,aAAKC,WAAL,GAAmBD,EAAnB;;AAEA,aAAKE,IAAL,GAAY,IAAZ;AACA,aAAKC,aAAL,GAAqB,KAArB;AACA,aAAKC,OAAL,GAAe,IAAf;AACA,aAAKC,OAAL,GAAe,IAAf;;AAEA;;;;AAIA,aAAKC,WAAL,CAAiBxC,KAAK,UAAL,EAAiByC,SAAlC,EAA6C,EAAEC,KAAK/C,cAAc,mBAArB,EAA7C;;AAEA;AACA,aAAKgD,QAAL,GAAgB,KAAhB;;AAEA;AACA,YAAI,CAAC,KAAKP,IAAV,EAAgB;AACZ,gBAAI,QAAOA,IAAP,yCAAOA,IAAP,cAAsBQ,SAAtB,yCAAsBA,SAAtB,EAAJ,EAAqC;AACjCrC,wBAAQsC,IAAR,CAAa,kDAAb;AACA,qBAAKT,IAAL,GAAY,IAAIU,IAAJ,CAAS,IAAIA,KAAKC,SAAL,CAAeC,YAAnB,CAAgCvD,gBAAhC,CAAT,CAAZ;AACA,qBAAKwD,YAAL,CAAkB,IAAlB;AACH,aAJD,MAIO;AACH,qBAAKb,IAAL,GAAYA,IAAZ;AACA,qBAAKa,YAAL,CAAkB,KAAlB;AACH;AACJ;AAEJ;;AAED;;;;;;;;;qCAKgC;AAAA;;AAAA,gBAArBC,aAAqB,uEAAP,KAAO;;AAC5B,gBAAIC,OAAO,IAAX;AACA,mBAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;;AAEpC;AACA,oBAAIH,KAAKf,IAAL,CAAUmB,WAAV,EAAJ,EAA6B;;AAEzB;AACA,wBAAIJ,KAAKd,aAAT,EAAwB;AACpBgB,gCAAQ,mBAAR;AACH,qBAFD,MAIK;;AAED;AACAF,6BAAKf,IAAL,CAAUoB,OAAV,CAAkBC,UAAlB,CAA6B,UAACC,GAAD,EAAMC,KAAN,EAAiB;;AAE1C;AACA,gCAAID,GAAJ,EAAS;AACLJ,uCAAO,mCAAP;AACH;;AAED;AACA,kCAAKf,OAAL,GAAeoB,KAAf;;AAEA;AACA,gCAAIjE,SAASkE,QAAT,CAAkBD,KAAlB,CAAJ,EAA8B;;AAE1B;AACA,oCAAIE,UAAUV,KAAKf,IAAL,CAAU0B,GAAV,CAAcC,QAAd,CAAuBjE,aAAvB,EAAsCkE,EAAtC,CAAyCnE,cAAzC,CAAd;;AAEA;AACAgE,wCAAQI,WAAR,CAAoB,SAApB,EAA+B,UAASP,GAAT,EAAcQ,GAAd,EAAmB;;AAE9C,wCAAIR,GAAJ,EAAS;AACLnD,gDAAQC,KAAR,CAAckD,GAAd;AACAJ,+CAAO,yCAAP;AACH,qCAHD,MAKK;;AAED/C,gDAAQQ,GAAR,CAAY,4BAAZ,EAA0CmD,GAA1C;AACAf,6CAAKb,OAAL,GAAe4B,GAAf;;AAEA;AACA,4CAAIf,KAAKR,QAAT,EAAmB;AACfQ,iDAAKd,aAAL,GAAqB,IAArB;AACAgB,oDAAQ,qBAAR;AACH;;AAED;AALA,6CAMK,IAAI,CAACH,aAAL,EAAoB;;AAErB;AACA,oDAAI,OAAOC,KAAKf,IAAL,CAAU0B,GAAV,CAAcK,cAArB,KAAwC,WAA5C,EAAyD;;AAErD5D,4DAAQC,KAAR,CAAc,sCAAd;AACA2C,yDAAKf,IAAL,CAAU0B,GAAV,CAAcK,cAAd,GAA+BhB,KAAKf,IAAL,CAAU0B,GAAV,CAAcM,QAAd,CAAuB,CAAvB,CAA/B;AACAjB,yDAAKd,aAAL,GAAqB,IAArB;AACAgB,4DAAQ,WAAR;AAEH,iDAPD,MAOO;;AAEHF,yDAAKd,aAAL,GAAqB,IAArB;AACAgB,4DAAQ,iCAAR;AAEH;AACJ;;AAED;AAlBK,iDAmBA;AACDF,yDAAKd,aAAL,GAAqB,IAArB;AACAgB,4DAAQ,WAAR;AACH;AAEJ;AAEJ,iCA7CD;AA8CH;;AAED;AAtDA,iCAuDK;AACDC,2CAAO,kCAAkCK,KAAzC;AACH;AAEJ,yBAtED;AAwEH;AAEJ,iBApFD,MAoFO;;AAEHL,2BAAO,eAAP;AAEH;AAEJ,aA7FM,CAAP;AA8FH;;AAED;;;;;;;uCAIee,KAAK;AAChB,gBAAI,OAAOA,GAAP,KAAe,QAAf,KAA4BA,IAAIC,KAAJ,CAAU,CAAV,EAAY,CAAZ,MAAmB,MAAnB,IAA6BD,IAAIC,KAAJ,CAAU,CAAV,EAAY,CAAZ,MAAmB,GAA5E,CAAJ,EAAsF,OAAO,IAAP;AACtF,mBAAO,KAAP;AACH;;AAED;;;;;;;qCAIaD,KAAK;AACd,mBAAO,IAAIjB,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACpC,oBAAIiB,OAAOC,cAAX,EAA2B;AACvB,wBAAIC,MAAM,IAAID,cAAJ,EAAV;AACH,iBAFD,MAEO;AACH,wBAAIC,MAAM,IAAIC,aAAJ,CAAkB,mBAAlB,CAAV;AACH;;AAEDD,oBAAIE,kBAAJ,GAAyB,YAAW;AAChC,wBAAIF,IAAIG,UAAJ,IAAkB,CAAlB,IAAuBH,IAAII,MAAJ,IAAc,GAAzC,EAA8C;AAC1CxB,gCAAQoB,IAAIK,YAAZ;AACH,qBAFD,MAEO,IAAIL,IAAIG,UAAJ,IAAkB,CAAtB,EAAyB;AAC5BtB,+BAAOmB,IAAII,MAAX;AACH;AACJ,iBAND;AAOAJ,oBAAIM,IAAJ,CAAS,KAAT,EAAgBV,GAAhB;AACAI,oBAAIO,IAAJ;AACH,aAhBM,CAAP;AAiBH;;AAED;;;;;;;;;gCAMQC,SAASC,UAAUC,SAAS;AAAA;;AAChC,mBAAO,IAAI/B,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;;AAEpC;AACA,oBAAI8B,kBAAkBC,OAAOC,MAAP,CAAcH,OAAd,EAAuB;AACzCI,4BAAQ/F,WADiC;AAEzCgG,oCAAgB3F;AAFyB,iBAAvB,CAAtB;;AAKA,oBAAI,OAAK4F,cAAL,CAAoBP,QAApB,CAAJ,EAAmC;;AAE/B,2BAAKQ,YAAL,CAAkBR,QAAlB,EAA4BS,IAA5B,CAAiC,UAASC,IAAT,EAAe;;AAE5CX,gCAAQxC,SAAR,GAAoBoD,SAASC,MAAT,CAAgBF,IAAhB,EAAsBR,eAAtB,CAApB;AACA/B;AAEH,qBALgC,CAK/B0C,IAL+B,QAAjC,EAKcC,KALd,CAKoB,UAAStC,GAAT,EAAc;;AAE9BJ,+BAAOI,GAAP;AAEH,qBATD;AAWH,iBAbD,MAaO;;AAEHuB,4BAAQxC,SAAR,GAAoBoD,SAASC,MAAT,CAAgBZ,QAAhB,EAA0BE,eAA1B,CAApB;AACA/B;AAEH;AAEJ,aA5BM,CAAP;AA6BH;;AAED;;;;;;;;oCAKY6B,UAAUC,SAAS;AAC3B,mBAAO,KAAKc,OAAL,CAAa,KAAK9D,WAAlB,EAA+B+C,QAA/B,EAAyCC,OAAzC,CAAP;AACH;;AAED;;;;;;;qCAIae,IAAI;;AAEb;AACA,iBAAKvD,QAAL,GAAgBuD,EAAhB;;AAEA;AACA,gBAAIC,QAAQjG,SAASe,sBAAT,CAAgC,IAAhC,CAAZ;;AAEA;AACA,gBAAImF,gBAAJ;AACA,gBAAI,KAAKzD,QAAT,EAAmB;AACfyD,0BAAU,OAAV;AACH,aAFD,MAEO;AACHA,0BAAU,MAAV;AACH;;AAED;AACA,iBAAK,IAAIhF,IAAI,CAAb,EAAgBA,IAAI+E,MAAM9E,MAA1B,EAAkCD,GAAlC,EAAuC;AACnC+E,sBAAM/E,CAAN,EAASiF,KAAT,CAAeD,OAAf,GAAyBA,OAAzB;AACH;AAEJ;;AAED;;;;;;sCAGc;AACVpG,iBAAK,iBAAL,EAAwByC,SAAxB,GAAoC,EAApC;AACH;;AAED;;;;;;qCAGa;AACT,iBAAKwD,OAAL,CACIjG,KAAK,iBAAL,CADJ,EAEIA,KAAK,YAAL,EAAmByC,SAFvB,EAGI;AACI6D,uBAAO,gCADX;AAEIC,yBAAS;AAFb,aAHJ;AAQH;;AAED;;;;;;;;+BAKOjE,SAAS;AACZ/B,oBAAQQ,GAAR,CAAYuB,OAAZ;AACA,gBAAI,CAACT,gBAAgB2E,SAAhB,CAA0BlE,OAA1B,CAAL,EAAyC;AACrC/B,wBAAQC,KAAR,CAAc,iBAAd;AACA;AACH;;AAED,gBAAIiG,gBAAgBzG,KAAK,cAAL,CAApB;;AAEA;AACAyG,0BAAcvF,SAAd,CAAwBM,MAAxB,CAA+B,MAA/B;AACA;AACA,iBAAKyE,OAAL,CAAaQ,aAAb,EAA4BzG,KAAK,aAAL,EAAoByC,SAAhD,EAA2D,EAA3D;;AAEA,gBAAIiE,eAAe1G,KAAK,eAAL,CAAnB;AACA;AACA0G,yBAAaxF,SAAb,CAAuBK,GAAvB,CAA2B,YAA3B;;AAEA,gBAAIoF,aAAa3G,KAAK,aAAL,CAAjB;AACA;AACA2G,uBAAWjG,QAAX,CAAoB,SAApB,EAA+BQ,SAA/B,CAAyCM,MAAzC,CAAgD,WAAhD;;AAEA,gBAAI2B,OAAO,IAAX;AACA,iBAAKyD,UAAL,GAAkBjB,IAAlB,CAAuB,UAASzB,GAAT,EAAc;;AAEjC,oBAAI2C,MAAM1D,KAAKf,IAAL,CAAU0B,GAAV,CAAcC,QAAd,CAAuBnE,WAAvB,EAAoCoE,EAApC,CAAuCb,KAAKb,OAA5C,CAAV;;AAEAuE,oBAAIC,gBAAJ,CAAqBC,IAArB,CAA0BzE,OAA1B,EAAmC,UAASoB,GAAT,EAAcsD,IAAd,EAAoB;;AAEnD;AACA,wBAAItD,GAAJ,EAAS,MAAMA,GAAN;;AAET;AACA,wBAAIuD,QAAQC,WAAWF,KAAK,CAAL,CAAX,IAAsB,GAAlC;;AAEA,wBAAIG,mBAAJ;AACA,wBAAIF,SAAS,CAAC,CAAV,IAAeA,QAAQ,CAAC,CAA5B,EAA+BE,aAAa,KAAb,CAA/B,KACK,IAAIF,SAAS,CAAC,CAAV,IAAeA,QAAQ,CAA3B,EAA8BE,aAAa,MAAb,CAA9B,KACA,IAAIF,SAAS,CAAb,EAAgBE,aAAa,MAAb;AACrB,wBAAIF,QAAQ,CAAZ,EAAeA,QAAQ,CAAR;AACf,wBAAIA,QAAQ,CAAC,CAAb,EAAgBA,QAAQ,CAAC,CAAT;AAChB1G,4BAAQQ,GAAR,CAAY,SAAZ,EAAuBkG,KAAvB,EAA8B,eAA9B,EAA+CE,UAA/C;;AAEA;AACA,wBAAIC,eAAe;AACbC,oCAAY,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,CADC;AAEbC,gCAAQ,GAFK;AAGbC,8BAAM,GAHO;AAIbC,gCAAQ;AAJK,qBAAnB;AAMA,wBAAIC,YAAY,IAAIC,SAAJ,CAAcpF,OAAd,EAAuB8E,YAAvB,EAAqCO,QAArC,EAAhB;;AAEA;AACAxE,yBAAK8C,OAAL,CAAaQ,aAAb,EAA4BzG,KAAK,mBAAL,EAA0ByC,SAAtD,EAAiE;AAC7DH,iCAASA,OADoD;AAE7D2E,+BAAOA,KAFsD;AAG7DW,kCAAUC,KAAKC,KAAL,CAAWb,KAAX,CAHmD;AAI7Dc,+BAAOf,KAAK,CAAL,CAJsD;AAK7DG,oCAAYA,UALiD;AAM7Da,mCAAWP;AANkD,qBAAjE;;AASAf,iCAAaxF,SAAb,CAAuBM,MAAvB,CAA8B,YAA9B;AAEH,iBArCD;AAuCH,aA3CD,EA2CGwE,KA3CH,CA2CS,UAAStC,GAAT,EAAc;;AAEnB;AACAgD,6BAAaxF,SAAb,CAAuBM,MAAvB,CAA8B,YAA9B;;AAEA;AACAmF,2BAAWjG,QAAX,CAAoB,SAApB,EAA+BQ,SAA/B,CAAyCK,GAAzC,CAA6C,WAA7C;;AAEA;AACA4B,qBAAK8C,OAAL,CAAaQ,aAAb,EAA4BzG,KAAK,iBAAL,EAAwByC,SAApD,EAA+D;AAC3DwF,kCAAcvE;AAD6C,iBAA/D;AAIH,aAxDD;AA0DH;;AAED;;;;;;;;;6BAMKpB,SAASxB,QAAQ;;AAElB;AACA;AACA,gBAAIA,SAAS,CAAC,CAAV,IAAeA,SAAS,CAA5B,EAA+B;AAC3BP,wBAAQC,KAAR,CAAc,sBAAd;AACA;AACH;AACD,gBAAI,CAACqB,gBAAgB2E,SAAhB,CAA0BlE,OAA1B,CAAL,EAAyC;AACrC/B,wBAAQC,KAAR,CAAc,iBAAd;AACA;AACH;;AAED,gBAAI0H,QAAJ;;AAEA,gBAAI/E,OAAO,IAAX;AACA,iBAAKyD,UAAL,CAAgB,IAAhB,EAAsBjB,IAAtB,CAA2B,UAASzB,GAAT,EAAc;;AAErC,oBAAI2C,MAAM1D,KAAKf,IAAL,CAAU0B,GAAV,CAAcC,QAAd,CAAuBnE,WAAvB,EAAoCoE,EAApC,CAAuCb,KAAKb,OAA5C,CAAV;;AAEA;AACA,oBAAImE,gBAAgBzG,KAAK,gBAAL,CAApB;AACAyG,8BAAcvF,SAAd,CAAwBM,MAAxB,CAA+B,MAA/B;AACA;AACA2B,qBAAK8C,OAAL,CAAaQ,aAAb,EAA4BzG,KAAK,aAAL,EAAoByC,SAAhD,EAA2D,EAA3D;;AAEAyF,2BAAWrB,IAAIlF,IAAJ,CAASW,OAAT,EAAkBxB,MAAlB,EAA0B,EAAEH,OAAOhB,WAAT,EAAsBwI,KAAK,MAA3B,EAA1B,EAA+D,UAASzE,GAAT,EAAcsD,IAAd,EAAoB;AAC1FzG,4BAAQQ,GAAR,CAAY,mBAAZ;AACAR,4BAAQQ,GAAR,CAAYiG,IAAZ;AACA,wBAAItD,GAAJ,EAAS;;AAELnD,gCAAQC,KAAR,CAAckD,GAAd;AACA;AAEH,qBALD,MAKO;;AAEH,4BAAI0E,sBAAJ;AACA,4BAAIjF,KAAKZ,OAAL,IAAgB,GAApB,EAAyB;AACrB6F,4CAAgB,qCAAqCpB,IAArD;AACH,yBAFD,MAEO;AACHoB,4CAAgB,6BAA6BpB,IAA7C;AACH;;AAED;AACA7D,6BAAK8C,OAAL,CAAaQ,aAAb,EAA4BzG,KAAK,mBAAL,EAA0ByC,SAAtD,EAAiE;AAC7DH,qCAASA,OADoD;AAE7D2E,mCAAOnG,MAFsD;AAG7DuH,yCAAarB,IAHgD;AAI7DoB,2CAAeA;AAJ8C,yBAAjE;AAOH;AAEJ,iBA3BU,CAAX;AA6BH,aAvCD;;AAyCA,mBAAOF,QAAP;AAEH","file":"etherep.js","sourcesContent":["///\n/// CONSTANTS\n///\nconst STATIC_ROOT = \"\";\nconst DEFAULT_PROVIDER = \"https://mainnet.infura.io/FDJajyHvjza2cZK85SZ6\";\nconst NETWORKS = [\"1\"];\nconst ETHEREP_FEE = 200000000000000;\nconst ETHEREP_ABI = [{\"constant\":false,\"inputs\":[{\"name\":\"d\",\"type\":\"bool\"}],\"name\":\"setDebug\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"newFee\",\"type\":\"uint256\"}],\"name\":\"setFee\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"drain\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"who\",\"type\":\"address\"}],\"name\":\"getScoreAndCount\",\"outputs\":[{\"name\":\"score\",\"type\":\"int256\"},{\"name\":\"ratings\",\"type\":\"uint256\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getDelay\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getFee\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"who\",\"type\":\"address\"}],\"name\":\"setManager\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getDebug\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"who\",\"type\":\"address\"}],\"name\":\"getScore\",\"outputs\":[{\"name\":\"score\",\"type\":\"int256\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getManager\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_delay\",\"type\":\"uint256\"}],\"name\":\"setDelay\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"who\",\"type\":\"address\"},{\"name\":\"rating\",\"type\":\"int256\"}],\"name\":\"rate\",\"outputs\":[],\"payable\":true,\"type\":\"function\"},{\"inputs\":[{\"name\":\"_manager\",\"type\":\"address\"},{\"name\":\"_fee\",\"type\":\"uint256\"},{\"name\":\"_storageAddress\",\"type\":\"address\"},{\"name\":\"_wait\",\"type\":\"uint256\"}],\"payable\":false,\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"sender\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"message\",\"type\":\"string\"}],\"name\":\"Error\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"message\",\"type\":\"string\"}],\"name\":\"Debug\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"message\",\"type\":\"int256\"}],\"name\":\"DebugInt\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"message\",\"type\":\"uint256\"}],\"name\":\"DebugUint\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"by\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"who\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"rating\",\"type\":\"int256\"}],\"name\":\"Rating\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"f\",\"type\":\"uint256\"}],\"name\":\"FeeChanged\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"d\",\"type\":\"uint256\"}],\"name\":\"DelayChanged\",\"type\":\"event\"}];\nconst MIGRATION_ADDR = \"0xf302e819f3b6e3c1dd869ffdc3cf82646ccd4748\";\nconst MIGRATION_ABI = [{\"constant\":true,\"inputs\":[{\"name\":\"who\",\"type\":\"address\"}],\"name\":\"getPermissions\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"},{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"adminAddress\",\"type\":\"address\"}],\"name\":\"removeAdmin\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"manAddress\",\"type\":\"address\"}],\"name\":\"addManager\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"key\",\"type\":\"string\"}],\"name\":\"getContract\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"key\",\"type\":\"string\"},{\"name\":\"contractAddress\",\"type\":\"address\"}],\"name\":\"setContract\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"adminAddress\",\"type\":\"address\"}],\"name\":\"addAdmin\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"manAddress\",\"type\":\"address\"}],\"name\":\"removeManager\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"inputs\":[{\"name\":\"originalAdmin\",\"type\":\"address\"}],\"payable\":false,\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"by\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"key\",\"type\":\"string\"},{\"indexed\":false,\"name\":\"contractAddress\",\"type\":\"address\"}],\"name\":\"EventSetContract\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"by\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"admin\",\"type\":\"address\"}],\"name\":\"EventAddAdmin\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"by\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"admin\",\"type\":\"address\"}],\"name\":\"EventRemoveAdmin\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"by\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"manager\",\"type\":\"address\"}],\"name\":\"EventAddManager\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"by\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"manager\",\"type\":\"address\"}],\"name\":\"EventRemoveManager\",\"type\":\"event\"}];\n\n// Approximate gas to rate\nconst APPROX_GAS_RATE = 23000;\n\n///\n/// UTILS\n///\nfunction byid(id) {\n    return document.getElementById(id);\n}\n\nfunction submitLookup(form) {\n    if (typeof etherep === 'undefined') console.error(\"etherep not defined!\");\n    else etherep.lookup(form.elements['address'].value);\n}\n\nfunction selectRating(thisButt, rating) {\n    console.log(\"selectRating\");\n    \n    let butts = document.getElementsByClassName('rating-button');\n    \n    if (byid('rating-list').classList.contains('collapsed')) {\n\n        // Show all buttons\n        for (let i = 0; i < butts.length; i++) {\n\n            butts[i].parentElement.classList.add('show');\n\n        }\n\n        // Remove the collapsed class\n        byid('rating-list').classList.remove('collapsed');\n\n    } else {\n\n        // Hide all buttons\n        for (let i = 0; i < butts.length; i++) {\n\n            // Except this one\n            if (butts[i] !== thisButt) {\n                butts[i].parentElement.classList.remove('show');\n            }\n\n        }\n\n        // Add the collapsed class\n        byid('rating-list').classList.add('collapsed');\n\n    }\n\n    byid('rating-value').value = rating;\n\n    return false;\n}\n\nfunction submitRating() {\n    let who = byid('rating-address').value;\n    let rating = byid('rating-value').value;\n    etherep.rate(who, rating);\n}\n\nfunction toggleRatingList() {\n    /*if (byid('rating-list').classList.contains('is-hidden-mobile')) {\n        byid('rating-list').classList.remove('is-hidden-mobile');\n    } else {\n        byid('rating-list').classList.add('is-hidden-mobile');\n    }*/\n\n    let butts = document.getElementsByClassName('rating-button');\n\n    if (byid('rating-list').classList.contains('collapsed')) {\n\n        for (let i = 0; i < butts.length; i++) {\n            butts[i].classList.remove('mobi-show');\n        }\n\n    }\n    \n\n    for (let i = 0; i < butts.length; i++) {\n        butts[i].classList.remove('mobi-show');\n    }\n}\n\n/**\n * Data sanity checking class\n */\nclass StringValidator {\n    /** \n     * Is the provided string a number?\n     * @param {string} val - String to test to see if it's a number\n     */\n    static isNumber(val) {\n        if (typeof val === \"number\") return true;\n        let regex = /^[0-9\\.]+$/;\n        if (typeof val == \"string\" && val.match(regex)) return true;\n        return false;\n    }\n\n    /**\n     * Is the provided value a (possibly) valid ethereum address?\n     * @param {string} val - The string to test to see if it's an address\n     */\n    static isAddress(val) {\n        let regex = /0x[A-Fa-f0-9]{40}/\n        if (typeof val == \"string\" && val.match(regex)) return true;\n        return false;\n    }\n}\n\n///\n/// MAIN \n///\nclass Etherep {\n    \n    constructor(el) {\n\n        this.mainElement = el;\n\n        this.web3 = null;\n        this.web3Connected = false;\n        this.address = null;\n        this.network = null;\n\n        /*if (typeof page == typeof undefined) {\n            console.error(\"page is unavailable, this app will not work properly!\");\n        }*/\n\n        this._renderMain(byid('tmplMain').innerHTML, { fee: ETHEREP_FEE / 1000000000000000000 });\n\n        // TBD later\n        this.readOnly = false;\n\n        // Connect\n        if (!this.web3) {\n            if (typeof web3 == typeof undefined) {\n                console.warn(\"Attempting to create a connection to default RPC\");\n                this.web3 = new Web3(new Web3.providers.HttpProvider(DEFAULT_PROVIDER));\n                this._setReadOnly(true);\n            } else {\n                this.web3 = web3;\n                this._setReadOnly(false);\n            }\n        }\n\n    }\n\n    /**\n     * Make sure we're properly connected to the blockchain\n     * @param {boolean} ignoreDefault - Whether or not to ignore the default account check\n     * @returns {Promise}\n     */\n    _web3Valid(ignoreDefault=false) {\n        var that = this;\n        return new Promise((resolve, reject) => {\n\n            // Are we connected?\n            if (that.web3.isConnected()) {\n\n                // Don't do this repeatedly\n                if (that.web3Connected) {\n                    resolve(\"Already connected\");\n                }\n\n                else {\n                \n                    // Check network ID\n                    that.web3.version.getNetwork((err, netId) =>  {\n                        \n                        // If this failed, maybe we aren't really connected?\n                        if (err) {\n                            reject(\"User is not using a Web3 browser!\");\n                        }\n\n                        // Set current network\n                        this.network = netId;\n\n                        // Need to be connected to a network with our contracts deployed\n                        if (NETWORKS.includes(netId)) {\n\n                            // Get the migration contract\n                            let migrate = that.web3.eth.contract(MIGRATION_ABI).at(MIGRATION_ADDR);\n\n                            // Get the contract address from the migration contract\n                            migrate.getContract(\"etherep\", function(err, res) {\n\n                                if (err) {\n                                    console.error(err);\n                                    reject('Could not get etherep contract address!');\n                                }\n\n                                else {\n                                \n                                    console.log(\"Etherep contract address: \", res);\n                                    that.address = res;\n\n                                    // If we're read-only, we're done\n                                    if (that.readOnly) {\n                                        that.web3Connected = true;\n                                        resolve(\"Connected read-only\");\n                                    } \n\n                                    // Otherwise, do basic account setup\n                                    else if (!ignoreDefault) {\n                                            \n                                        // Check for a default account\n                                        if (typeof that.web3.eth.defaultAccount === \"undefined\") {\n                                            \n                                            console.error(\"Not Implemented: Need to set account\");\n                                            that.web3.eth.defaultAccount = that.web3.eth.accounts[0];\n                                            that.web3Connected = true;\n                                            resolve(\"Connected\");\n\n                                        } else {\n                                            \n                                            that.web3Connected = true;\n                                            resolve(\"Connected to the proper network\");\n\n                                        }\n                                    }\n\n                                    // We're still good to go\n                                    else {\n                                        that.web3Connected = true;\n                                        resolve(\"Connected\");\n                                    }\n\n                                }\n\n                            });\n                        } \n\n                        // Not a valid network\n                        else {\n                            reject(\"User is connected to network \" + netId);\n                        } \n\n                    });\n\n                }\n\n            } else {\n                \n                reject(\"Not connected\");\n\n            }\n\n        });\n    }\n\n    /** \n     * Is this text a url? \n     * @param {string} url - The string to test to see if it's a URL\n     */\n    _isTemplateUrl(url) {\n        if (typeof url === \"string\" && (url.slice(0,4) === \"http\" || url.slice(0,1) === '/')) return true;\n        return false;\n    }\n\n    /** \n     * Fetch a template's source from a URL \n     * @param {string} url - The URL of the template to fetch\n     */\n    _getTemplate(url) {\n        return new Promise((resolve, reject) => {\n            if (window.XMLHttpRequest) {\n                var xhr = new XMLHttpRequest();\n            } else {\n                var xhr = new ActiveXObject(\"Microsoft.XMLHTTP\");\n            }\n\n            xhr.onreadystatechange = function() {\n                if (xhr.readyState == 4 && xhr.status == 200) {\n                    resolve(xhr.responseText);\n                } else if (xhr.readyState == 4) {\n                    reject(xhr.status);\n                }\n            }\n            xhr.open(\"GET\", url);\n            xhr.send();\n        });\n    }\n\n    /** \n     * Render a template to an element using context \n     * @param {element} element - DOM element we're rendering to\n     * @param {string} template - The template string we will be rendering\n     * @param {object} context - The context variables to render to the template\n     */\n    _render(element, template, context) {\n        return new Promise((resolve, reject) => {\n\n            // Get our defaults available to templates\n            let combinedContext = Object.assign(context, { \n                static: STATIC_ROOT,\n                migrateAddress: MIGRATION_ADDR\n            });\n\n            if (this._isTemplateUrl(template)) {\n\n                this._getTemplate(template).then(function(tmpl) {\n                    \n                    element.innerHTML = Mustache.render(tmpl, combinedContext);\n                    resolve();\n\n                }.bind(this)).catch(function(err) {\n\n                    reject(err);\n\n                });\n\n            } else {\n                \n                element.innerHTML = Mustache.render(template, combinedContext);\n                resolve();\n\n            }\n\n        })\n    }\n\n    /** \n     * Render a template to the main element of the app \n     * @param {string} template - The template string we will be rendering\n     * @param {object} context - The context variables to render to the template\n     */\n    _renderMain(template, context) {\n        return this._render(this.mainElement, template, context);\n    }\n\n    /**\n     * Set readOnly and render accordingly \n     * @param {boolean} ro - readOnly setting\n     */\n    _setReadOnly(ro) {\n        \n        // Set the var\n        this.readOnly = ro;\n\n        // Get the read only elements\n        var roEls = document.getElementsByClassName('ro');\n\n        // Figure out display setting\n        let display;\n        if (this.readOnly) {\n            display = \"block\";\n        } else {\n            display = \"none\";\n        }\n\n        // Set it\n        for (var i = 0; i < roEls.length; i++) {\n            roEls[i].style.display = display;\n        }\n\n    }\n\n    /**\n     * Close all modals\n     */\n    closeModals() {\n        byid('modal-container').innerHTML = \"\";\n    }\n\n    /**\n     * Show the modal explaining why a fee is charged\n     */\n    showWhyFee() {\n        this._render(\n            byid('modal-container'), \n            byid('tmplNotice').innerHTML, \n            { \n                title: \"Why does Etherep charge a fee?\", \n                content: \"Etherep charges a small fee for upkeep up services and to reduce spam ratings.  It will likely be adjusted on the fly as spam realities change and the price of ether changes.\" \n            }\n        );\n    }\n\n    /**\n     * Lookup the rating for an address\n     * @param {string} address - The ethereum address to lookup\n     * @returns {int} - The rating for the address\n     */\n    lookup(address) {\n        console.log(address);\n        if (!StringValidator.isAddress(address)) {\n            console.error(\"Invalid address\");\n            return;\n        }\n\n        let targetElement = byid('lookup-score');\n\n        // Show results element\n        targetElement.classList.remove('hide');\n        // Render loading spinner\n        this._render(targetElement, byid('tmplSpinner').innerHTML, {});\n\n        let submitButton = byid('lookup-button');\n        // Signal loading\n        submitButton.classList.add('is-loading');\n\n        let lookupForm = byid('lookup-form');\n        // Reset any error status\n        lookupForm.elements['address'].classList.remove('is-danger');\n\n        var that = this;\n        this._web3Valid().then(function(res) {\n            \n            let rep = that.web3.eth.contract(ETHEREP_ABI).at(that.address);\n            \n            rep.getScoreAndCount.call(address, function(err, resp) {\n\n                // Handle this in the catch block\n                if (err) throw err;\n\n                // Calculate single digit score\n                let score = parseFloat(resp[0]) / 100;\n\n                let scoreClass;\n                if (score >= -5 && score < -1) scoreClass = \"bad\";\n                else if (score >= -1 && score < 3) scoreClass = \"fair\";\n                else if (score >= 3) scoreClass = \"good\";\n                if (score > 5) score = 5;\n                if (score < -5) score = -5;\n                console.log(\"Score: \", score, \" scoreClass: \", scoreClass);\n\n                // Get identicon\n                let identOptions = {\n                      background: [253, 231, 208, 255],\n                      margin: 0.2,\n                      size: 100,\n                      format: 'svg'\n                    };\n                let identData = new Identicon(address, identOptions).toString();\n\n                // Render the element\n                that._render(targetElement, byid('tmplLookupResults').innerHTML, {\n                    address: address,\n                    score: score,\n                    scoreInt: Math.round(score),\n                    count: resp[1],\n                    scoreClass: scoreClass,\n                    identicon: identData\n                });\n\n                submitButton.classList.remove('is-loading');\n\n            });\n\n        }).catch(function(err) {\n\n            // Reset all style\n            submitButton.classList.remove('is-loading');\n\n            // And signal error on the input\n            lookupForm.elements['address'].classList.add('is-danger');\n\n            // Render the element\n            that._render(targetElement, byid('tmplLookupError').innerHTML, {\n                errorMessage: err\n            });\n\n        });\n\n    }\n\n    /**\n     * Rate an address\n     * @param {string} address - The ethereum address to rate\n     * @param {int} rating - The rating from -5 to 5\n     * @returns {string} Transaction hash\n     */\n    rate(address, rating) {\n\n        // Sanity checks\n        // TODO: give feedback to user\n        if (rating < -5 || rating > 5) {\n            console.error(\"Rating out of bounds\");\n            return;\n        }\n        if (!StringValidator.isAddress(address)) {\n            console.error(\"Invalid address\");\n            return;\n        }\n\n        var response;\n\n        var that = this;\n        this._web3Valid(true).then(function(res) {\n            \n            let rep = that.web3.eth.contract(ETHEREP_ABI).at(that.address);\n\n            // Get the target element and show loading effect\n            let targetElement = byid('rating-results');\n            targetElement.classList.remove('hide');\n            // Render loading spinner\n            that._render(targetElement, byid('tmplSpinner').innerHTML, {});\n            \n            response = rep.rate(address, rating, { value: ETHEREP_FEE, gas: 300000 }, function(err, resp) {\n                console.log('rep.rate callback');\n                console.log(resp);\n                if (err) {\n                    \n                    console.error(err);\n                    return;\n\n                } else {\n\n                    let etherscanLink;\n                    if (that.network == \"3\") {\n                        etherscanLink = \"https://ropsten.etherscan.io/tx/\" + resp;\n                    } else {\n                        etherscanLink = \"https://etherscan.io/tx/\" + resp;\n                    }\n\n                    // Render the notice\n                    that._render(targetElement, byid('tmplRatingResults').innerHTML, {\n                        address: address,\n                        score: rating,\n                        transaction: resp,\n                        etherscanLink: etherscanLink\n                    });\n\n                }\n\n            });\n\n        });\n\n        return response;\n\n    }\n}\n"]}